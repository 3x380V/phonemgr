2008-06-16  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (phonemgr_utils_gn_error_to_string):
	Fix call to phonemgr_utils_gn_error_to_string() failing
	when perr is NULL

2008-06-16  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c (phonemgr_listener_thread):
	Don't get the own details twice

2008-06-16  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c (phonemgr_listener_gnokii_func),
	(phonemgr_listener_connect): More error output when we
	get disconnected because the device has gone away,
	get the own details earlier, so that they're available when
	we're actually connected

2008-06-16  Baptiste Mille-Mathias <baptiste.millemathias@gmail.com>

	* Makefile.am,
	configure.in,
	cut-n-paste/Makefile.am,
	cut-n-paste/update-from-egg.sh,
	cut-n-paste/e-contact-entry/e-contact-entry.c,
	cut-n-paste/e-contact-entry/e-contact-entry.h,
	cut-n-paste/e-contact-entry/econtactentry-marshal.list,
	cut-n-paste/e-contact-entry/Makefile.am,
	cut-n-paste/gconf-bridge/gconf-bridge.c,
	cut-n-paste/gconf-bridge/gconf-bridge.h,
	cut-n-paste/gconf-bridge/Makefile.am,
	src/e-contact-entry.c,
	src/e-contact-entry.h,
	src/econtactentry-marshal.list,
	src/gconf-bridge.c,
	src/gconf-bridge.h,
	src/Makefile.am: move cut'n pasted code to cut-n-paste/ to prepare
	gnome-bluetooth dependency removal (step 1 of #455838)

2008-06-16  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am: Use pkgdatadir, as src/Makefile.am does,
	to install the glade file

2008-06-13  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c (phonemgr_listener_get_own_details),
	(phonemgr_listener_disconnect_cleanup): Save the IMEI of the
	phone on connect

============ Version 0.60

2008-06-11  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.60

2008-06-11  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c (phonemgr_listener_gnokii_func),
	(phonemgr_listener_connect), (phonemgr_listener_cell_not_cb),
	(phonemgr_listener_sms_notification_soft_poll),
	(phonemgr_listener_battery_poll),
	(phonemgr_listener_get_own_details),
	(phonemgr_listener_set_sms_notification),
	(phonemgr_listener_set_call_notification),
	(phonemgr_listener_set_cell_notification),
	(phonemgr_listener_disconnect_cleanup), (phonemgr_listener_thread),
	(phonemgr_listener_disconnect), (phonemgr_listener_queue_message),
	(phonemgr_listener_set_time): Add phonemgr_listener_gnokii_func for
	use in the polling thread, which will mark the connection as
	terminated, terminate cleanly when the phone is disconnected during
	an operation. Fix reconnecting using the same PhonemgrListener
	object

	* src/app.h:
	* src/connection.c (attempt_reconnect), (connect_phone),
	(on_status): Don't try to reconnect if we're not idle

	(Closes: #495278)

2008-05-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Update the gnokii requirements for the
	network notification work

2008-05-30  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require glib 2.13 and newer

	* src/app.h:
	* src/connection.c (on_status), (on_network),
	(initialise_connection):
	* src/org_gnome_phone_Manager.xml:
	* src/phonemgr-object.c (phonemgr_object_class_init),
	(phonemgr_object_emit_network_registration_changed),
	(phonemgr_object_coldplug):
	* src/phonemgr-object.h: Add the NetworkRegistrationChanged
	signal on the org.gnome.phone.Manager interface, for the purpose
	of looking up location based on network and cell IDs
	(Closes: #533283)

2008-05-30  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c (network_status), (main):
	* libgsm/phonemgr-listener.c (phonemgr_listener_class_init),
	(phonemgr_listener_push), (phonemgr_listener_cell_not_cb),
	(phonemgr_listener_set_cell_notification),
	(phonemgr_listener_thread):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-marshal.list: Add "network" signal to the backend
	which will push out the network code, and LAC and Cell ID to the
	front-end, for use with gsmloc.org and opencellid.org

2008-05-12  Bastien Nocera  <hadess@hadess.net>

	* src/main.c (main): Add -v/--version to display the program's
	version (Closes: #524360)

2008-05-12  Bastien Nocera  <hadess@hadess.net>

	* data/phonemgr.glade: Infrared actually uses /dev/ircomm0, not
	/dev/ircomm as mentioned in the UI, patch from Daniele Forsi
	<dforsi@gmail.com> (Closes: #532342)

2008-05-12  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (phonemgr_utils_address_is),
	(phonemgr_utils_write_config): Use the irda connection type when
	connecting to a phone via IrDA, so that the driver knows the
	connection init is different

	* libgsm/phonemgr-listener.c (phonemgr_listener_connect):
	Sleep for a second after disconnecting from IrDA devices because
	they suck

2008-04-11  Bastien Nocera  <hadess@hadess.net>

	* telepathy/main.c: Add an include for locale.h, spotted by
	Baptiste Mille-Mathias <bmm80@free.fr> (Closes: #527410)

============ Version 0.51

2008-03-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.51
	* libgsm/phonemgr-listener.c (phonemgr_listener_get_own_details):
	Abort straight away if we can't change to the ON address book
	folder
	* libgsm/glibgsmtest.c (send_message), (main):
	Send a message after a little timeout, to avoid behaving differently
	from gnome-phone-manager

2008-03-18  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c
	(phonemgr_listener_sms_notification_soft_poll):
	Spin less, fix some ms/microseconds confusion

2008-03-14  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (phonemgr_utils_address_is):
	Fix utter stupidness checking whether an address is
	actually a device path

2008-03-13  Bastien Nocera  <hadess@hadess.net>

	* README: update build dependencies
	* configure.in:
	* src/ui.c (create_send_dialog): Add spell checking
	to the "Send message" text area, based on patch by
	Daniel Schierbeck <daniel.schierbeck@gmail.com>
	(Closes: #508816)

============ Version 0.50

2008-03-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.50
	* data/Makefile.am: Fix distcheck

2008-03-08  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (find_service_channel):
	Don't use the public browse group to look for the Serial/DUN
	channel (Closes: #511220)

2008-03-08  Bastien Nocera  <hadess@hadess.net>

	* libgsm/Makefile.am:
	* libgsm/test-sdp-search.c (main): Add a test program for
	finding out the serial channel on a remote device

2008-03-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (phonemgr_utils_get_serial_channel),
	(phonemgr_utils_get_gnapplet_channel): Add debug for which
	channel ends up being selected

2008-03-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c (phonemgr_utils_driver_for_model):
	Change message when no driver is mentioned in the phones.xml
	to be less scary

2008-01-07  Bastien Nocera  <hadess@hadess.net>

	* telepathy/im-channel.c: (phoney_im_channel_set_property):
	Patch from Simon McVittie <simon.mcvittie@collabora.co.uk>
	to avoid warnings with telepathy >= 0.7.1 (Closes: #507258)

2007-12-14  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: Update from contact-lookup-applet

2007-12-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add requirement for bluez, we would fail
	building if bluez-libs wasn't new enough, or gnokii wasn't
	built with Bluetooth support (Closes: #500941)

2007-11-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: up the reqs to gnokii 0.6.22

	* libgsm/glibgsmtest.c: (report_status), (main):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_class_init),
	(phonemgr_listener_emit_report_status),
	(phonemgr_listener_emit_message), (phonemgr_listener_connect),
	(phonemgr_listener_push), (phonemgr_listener_new_sms_cb),
	(phonemgr_listener_call_status):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-marshal.list: Add the "report-status" signal to
	dispatch delivery report statuses, so they're better handled in
	the UI

2007-11-19  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add the Nokia E70 to the list of supported
	phones, with the gnapplet driver (Closes: #498239)
	* telepathy/im-channel.c: (phoney_im_channel_send): Fix build

2007-11-19  Bastien Nocera  <hadess@hadess.net>

	* data/phonemgr.glade:
	* libgsm/glibgsmtest.c: (main):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_queue_message):
	* libgsm/phonemgr-listener.h:
	* src/ui.c: (send_message):
	Add support for sending SMSes with delivery reports

2007-11-19  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (get_rfcomm_channel),
	(find_service_channel), (phonemgr_utils_get_serial_channel),
	(phonemgr_utils_get_gnapplet_channel),
	(phonemgr_utils_write_config), (phonemgr_utils_free),
	(phonemgr_utils_tell_driver), (phonemgr_utils_write_gnokii_config):
	* libgsm/phonemgr-utils.h: Add phonemgr_utils_get_gnapplet_channel
	to detect the channel used by gnapplet running on remote phones

	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect),
	(phonemgr_listener_call_status):
	Add support for gnapplet, detect if gnapplet is running, and
	connect to the right channel if it's running, error out
	if it's not running (Closes: #312127)

2007-11-19  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Make the Nokia 6111 use the 6510 driver
	(Closes: #498062)

2007-11-17  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: Update from contact-lookup-applet,
	don't force the width to be restricted to the width of the
	entry, spotted by Diego Escalante Urrelo <diegoe@gnome.org>
	(Closes: #496092)

2007-11-16  Bastien Nocera  <hadess@hadess.net>

	* data/Makefile.am:
	* data/gnome-phone-manager.1: Add man page from
	Francesco Namuri <francesco@namuri.it>
	(Closes: #496848)

2007-11-16  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* src/ui.c: (get_resource):
	Move ...
	* ui/*:
	to:
	* data/*:

	And assorted fixes

2007-11-15  Diego Escalante Urrelo  <diegoe@gnome.org>

	* libgsm/glibgsmtest.c: Add a missing include for locale.h, this was
	causing a FTBFS (Closes #496631)

2007-11-15  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection-manager.c:
	(phoney_connection_manager_get_phoney_connection),
	(_phoney_connection_manager_new_connection):
	Fix stupidness in _get_phoney_connection, error out when
	asked to create a connection for which we already handle the
	bluetooth address

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/gnome-phone-manager.desktop.in: Remove unneeded Encoding key
	(Closes: #496851)

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_queue_message),
	(phonemgr_listener_poll): Add http links in the dummy messages

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection-manager.c:
	(connection_shutdown_finished_cb):
	Emit DISCONNECTED when we've disconnected by hand
	* telepathy/connection.c: (_phoney_connection_shut_down):
	Add some debug here

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_message),
	(phonemgr_listener_connect), (phonemgr_listener_call_status),
	(phonemgr_listener_thread): exit super-fast when asked to during
	the initial setup

	* libgsm/phonemgr-utils.c: (phonemgr_utils_driver_for_model),
	(phonemgr_utils_driver_parse_start_tag),
	(phonemgr_utils_start_parse), (phonemgr_utils_init_hash_tables),
	(phonemgr_utils_tell_driver): Fix disconnecting and reconnecting
	to a phone with a driver, only add the phone's driver to the list of
	known devices when it's a known device

2007-11-14  Diego Escalante Urrelo  <diegoe@gnome.org>

	* src/Makefile.am: Fix BUILT_SOURCES being overwritten by MARSHALFILES
	and thus not generating phone-manager-interface.h (Closes #496632).

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* telepathy/Makefile.am: Add sms.profile to the dist

============ Version 0.40

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.40
	* telepathy/im-channel.c: (phoney_im_channel_send): Disable
	translation of actions for now
	* telepathy/Makefile.am: Remove built service file when cleaning up

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection-manager.c:
	(phoney_connection_manager_class_init):
	* telepathy/connection.c: (_phoney_connection_start_connecting),
	(_phoney_connection_shut_down):
	* telepathy/im-channel-factory.c: (phoney_im_channel_factory_init),
	(im_channel_closed_cb), (new_im_channel), (get_im_channel):
	* telepathy/im-channel.c: (phoney_im_channel_close):
	Use GUINT_TO/FROM_POINTER, as the handles are unsigned,
	Fix crasher when closing a channel, as we need to use g_object_unref
	not g_free (thanks to Simon McVittie) (Closes: #495099, #495274)
	Try to avoid warning on double-disconnect checks

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/menu.c: (construct_menu): Better indentation, spotted
	by Diego Escalante Urrelo (Closes: #496644)

2007-11-14  Bastien Nocera  <hadess@hadess.net>

	* src/e-phone-entry.c: (test_display_func): Fix build
	(Closes: #496676)

2007-11-13  Diego Escalante Urrelo  <diegoe@gnome.org>

	* ui/phonemgr.glade: Fix the expand property of the contact container 
	entry (Closes #496331)

2007-11-13  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/e-contact-entry.c: (entry_activate_cb),
	(completion_match_selected_cb), (e_contact_entry_display_func):
	* src/e-contact-entry.h:
	* src/e-phone-entry.c: (contact_selected_cb), (test_display_func):
	* src/econtactentry-marshal.list:
	Display all the mobile phone entries for each contact in the
	completion popup (Closes: #495236)

2007-11-13  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: (completion_match_selected_cb):
	Update from contact-lookup-applet, so we don't error out
	if one of the sources isn't available

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* src/icon.c: (tray_icon_activate_cb): Don't allow showing the
	new message dialogue if we're not connected to the phone
	(Closes: #495384)

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: Update from contact-lookup-applet,
	and remove the need to set the addressbook sources to
	autocomplete

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* src/icon.c: (tray_icon_activate_cb): Make a single-click
	on the tray icon popup the "new message" dialogue, when no
	messages are waiting (Closes: #495384)

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c:
	(phonemgr_listener_init), (phonemgr_listener_connect),
	(phonemgr_listener_get_own_details): When connecting the first
	time, try to get our own phone number, for use in the telepathy
	backend, not exported yet, and only works on some phones

2007-11-12  Bastien Nocera  <hadess@hadess.net>

	* ui/phonemgr.glade: Make the icons used named icons, instead of
	the stock ones. The stock icons didn't get themed, and didn't
	load if GNOME and gnome-phone-manager were installed in different
	prefixes. Remove "gnome" requires from the file as well
	(Closes: #495229)

2007-11-09  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Big patch from Pawel Kot
	<gnokii@gmail.com> to add all the phones from gnokii
	to the phones.xml file (Closes: #454825)

2007-11-09  Bastien Nocera  <hadess@hadess.net>

	* telepathy/im-channel.c: (phoney_im_channel_send):
	Fix the text we send not being echo'ed back in the UI

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* src/main.c: (main): Init the i18n functions

	* telepathy/im-channel.c: (phoney_im_channel_send):
	Don't escape the data coming from telepathy itself

	* telepathy/main.c: (main): And init i18n

	* libgsm/Makefile.am:
	* libgsm/glibgsmtest.c: (main): more i18n

	* libgsm/phonemgr-listener.c: (phonemgr_listener_poll): add some
	accents to the test messages sent

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* telepathy/sms.profile: Add a profile file for empathy, to be
	copied to /usr/share/mission-control/profiles/ (doesn't actually work)

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* telepathy/*: Rename the backend "Phoney", as in "phone", haha,
	and add the telepathy manager file, as well as the D-Bus service
	file, so it gets autostarted and discovered properly

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_address_is),
	(phonemgr_utils_get_channel), (phonemgr_utils_tell_driver),
	(phonemgr_utils_write_gnokii_config),
	(phonemgr_utils_connection_is_supported):
	Add support for DKU2 in --config and --identify, check better
	for Bluetooth addresses using bachk, remove support for DKU2
	in kernel driver mode
	* libgsm/phones.xml: Add the 6230i to the list, as used in
	the Nokia 6230i in DKU2 mode

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (main): Add commented test for dku2 USB cables
	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect):
	* libgsm/phonemgr-utils.c: (phonemgr_utils_address_is),
	(phonemgr_utils_write_config), (phonemgr_utils_driver_for_model),
	(phonemgr_utils_driver_for_device), (phonemgr_utils_connect):
	* libgsm/phonemgr-utils.h: Support DKU2 USB cables for Nokia phones,
	no UI for it yet though

2007-11-08  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection.c: (_sms_connection_create_handle_repos):
	* telepathy/im-channel-factory.c:
	(sms_im_channel_factory_iface_request):
	* telepathy/im-channel.c: (sms_im_channel_send):
	Fix utter stupidness in the contact repo, thanks to Simon McVittie,
	and make sending work

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_poll):
	Fix a crasher in the random text sending

	* telepathy/im-channel-factory.c:
	(sms_im_channel_factory_iface_request), (new_sms):
	* telepathy/im-channel.c: (sms_im_channel_send):
	Try to implement the sending part, fails miserably because the
	handle we get is our own bdaddr, what the

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_poll),
	(phonemgr_listener_connect), (phonemgr_listener_disconnect),
	(phonemgr_listener_init): Only send new messages when we're
	"connected" in the dummy backend, and randomise a bit the messages
	and senders

	* telepathy/im-channel-factory.c: (sms_im_channel_factory_init),
	(sms_im_channel_factory_set_property),
	(sms_im_channel_factory_iface_close_all), (new_sms),
	(set_im_channel_factory_listener): Connect to the "message" signal
	and receive messages without crashing, disconnect from the signal
	when all the channels are closed

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection-manager.c:
	(sms_connection_manager_get_sms_connection):
	Modify for changes below

	* telepathy/connection.h:
	* telepathy/connection.c:
	(sms_connection_get_unique_connection_name),
	(_sms_connection_start_connecting), (_contact_normalize),
	(_sms_connection_shut_down), (sms_connection_get_property),
	(sms_connection_set_property), (sms_connection_finalize),
	(sms_connection_class_init), (sms_connection_init):
	Add the PhonemgrListener as a property (so it's available for
	the IM channel factory), make the bdaddr private as well

	* telepathy/main.c: (main): Add --g-fatal-warnings support

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* telepathy/connection.c: (_sms_connection_start_connecting):
	Setup the connection handle once connected

2007-11-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect),
	(phonemgr_listener_disconnect), (phonemgr_listener_cancel_call),
	(phonemgr_listener_answer_call), (phonemgr_listener_queue_message),
	(phonemgr_listener_set_time), (phonemgr_listener_connected):
	Add PhonemgrListener type-checks to public functions

	* telepathy/connection-manager.c: (free_params):
	NULL terminate the params spec, otherwise we crash on startup

	* telepathy/connection.c: (_contact_normalize),
	(_sms_connection_create_handle_repos),
	(_sms_connection_create_channel_factories),
	(sms_connection_class_init), (sms_connection_init):
	* telepathy/connection.h:
	Implement ->create_handle_repos and ->create_channel_factories
	to make telepathy happy, also get a PhonemgrListener in the object
	on init, otherwise we don't have anything to play with

	* telepathy/main.c: (get_cm), (main): init threads for
	PhonemgrListener

2007-11-03  Bastien Nocera  <hadess@hadess.net>

	* ui/phonemgr.glade: Skip the characters left field when
	tabbing your way through the send dialogue (Closes: #492992)

2007-11-02  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* telepathy/*: add the beginnings of a telepathy backend,
	using the PhonemgrListener object. Doesn't actually work right
	now, but compiles...

2007-11-02  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (get_rfcomm_channel):
	Avoid the m-Router Connectivity channel as well

2007-11-02  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add the Nokia 5500 as an AT phone,
	until we can get something better (Closes: #475795)

2007-11-02  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (get_rfcomm_channel),
	(phonemgr_utils_get_channel), (phonemgr_utils_driver_for_model):
	Remove the work-around for channel 1, it was due to a b0rked SDP
	query
	Don't try to use the "Bluetooth Serial Port" on Nokias
	it doesn't work
	Make the "model not supported natively" a message
	so it doesn't hamper debugging

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_get_channel):
	Use channel 1 if no channel is listed in the discovery,
	some Nokia phones don't show channel 1, little buggers

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add the Sony Ericsson K800i to the list
	(Closes: #492378)

2007-11-01  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_battery_poll):
	Fix calculation of battery level when the driver uses arbitrary
	units

2007-10-31  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: (completion_match_selected_cb):
	Update from contact-lookup-applet, thanks Ross!
	(Closes: #491440)

2007-10-30  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (get_rfcomm_channel),
	(find_service_channel), (phonemgr_utils_get_channel): 
	Look for the Serial port channel before looking for DUN one,
	and ignore the "Nokia PC Suite" service, as it's useless to us
	(Closes: #491526)

2007-10-30  Bastien Nocera  <hadess@hadess.net>

	* README: Add web page address, thanks Kjartan

============ Version 0.30

2007-10-29  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.30

2007-10-29  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_queue_message):
	Fix sending texts that don't fit in the default GSM alphabet,
	gnokii expects UTF-8, and will convert to UCS-2 itself

2007-10-29  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_queue_message):
	Zero-out the SMS data after having sent the message

2007-10-29  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_message),
	(phonemgr_listener_connect), (phonemgr_listener_queue_message):
	When receiving texts, they will be in GSM alphabet if it fits
	in the alphabet (fixes receiving SMS from ISO8859-1 texts),
	Don't send texts as UCS-2 when they fit in the default GSM alphabet
	by not forgetting to convert to ISO8859-1 first
	(Closes: #490471)

	Sending as UCS-2 doesn't work though

2007-10-26  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_message),
	(phonemgr_listener_init), (phonemgr_listener_connect),
	(phonemgr_listener_battery_poll): Call GN_OP_GetBatteryLevel first,
	as it's what most drivers implement, also warn when the driver
	doesn't support

2007-10-26  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (main):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_get_property),
	(phonemgr_listener_set_property), (phonemgr_listener_class_init),
	(phonemgr_listener_emit_message), (phonemgr_listener_new),
	(phonemgr_listener_connect), (phonemgr_listener_battery_poll):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c: (phonemgr_utils_connect),
	(phonemgr_utils_tell_driver), (phonemgr_utils_write_gnokii_config):
	* libgsm/phonemgr-utils.h:
	* src/main.c: (main): Add "-d/--debug" option, to allow enabling
	debugging gnokii

2007-10-26  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c:
	(phonemgr_listener_set_sms_notification):
	* libgsm/phonemgr-utils.c: (phonemgr_utils_get_channel),
	(phonemgr_utils_config_append_debug),
	(phonemgr_utils_driver_for_model),
	(phonemgr_utils_driver_for_device), (phonemgr_utils_guess_driver),
	(phonemgr_utils_tell_driver), (phonemgr_utils_write_gnokii_config):
	* libgsm/phonemgr-utils.h:
	* src/main.c: (main): Add --config flag to gnome-phone-manager
	to dump a gnokii configuration file, to the best of g-p-m's
	knowledge, useful for debugging

2007-10-21  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add Sagem myX-7 to the list
	(Closes: #479563)

2007-10-21  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add the Nokia 3110 to the list
	(Closes: #488836)

============ Version 0.20

2007-10-17  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.20, require bluez for the SDP search

2007-10-14  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_write_config):
	Really use the right channel to connect to a phone, as gnokii
	uses rfcomm_channel, not channel in its config
	spotted by Malcolm Caldwell <malcolm.caldwell@cdu.edu.au>
	(Closes: #486331)

2007-10-03  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_queue_message):
	Fix thinko after the non-ASCII text messages sending work
	(Closes: #482899)

2007-09-24  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c:
	* libgsm/phonemgr-listener.c:
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c:
	* libgsm/phonemgr-utils.h:
	* src/app.h:
	* src/connection.c:
	* src/e-phone-entry.c:
	* src/e-phone-entry.h:
	* src/icon.c:
	* src/main.c:
	* src/menu.c:
	* src/phonemgr-chooser-button.c:
	* src/phonemgr-chooser-button.h:
	* src/phonemgr-object.c:
	* src/phonemgr-object.h:
	* src/test-entry.c:
	* src/ui.c:
	* README: Update copyright headers (Closes: #468938), mention license
	in the README, update requirements in the README

2007-09-24  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_message),
	(phonemgr_listener_set_sms_notification),
	(phonemgr_listener_queue_message): When receving a message, it
	will be in the locale's encoding, so convert it from that to
	UTF-8 (Closes: #479764)
	When sending a message, don't try to stuff UTF-8 in a UCS-2 string,
	and only use UCS-2 when the text doesn't fit in the default
	GSM alphabet, fixes sending in non-ASCII locales

2007-09-18  Bastien Nocera  <hadess@hadess.net>

	* src/menu.c: (about_activated): Fix warnings when running with
	GTK+ < 2.11.0 (Closes: #475836)

2007-08-31  Bastien Nocera  <hadess@hadess.net>

	* MAINTAINERS: Added

2007-08-19  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: the Nokia 6300 should use the 6510 driver,
	thanks to Michael Monreal

2007-08-19  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phones.xml: Add the Nokia 6300 to the list (Closes: #468244)

============ Version 0.10

2007-08-19  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: release 0.10

	* Makefile.am:
	* src/Makefile.am:
	* ui/Makefile.am: distcheck fixes

2007-08-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Require gnome-icon-theme 2.19.1 so we have a phone
	icon available (Closes: #461968)

2007-07-25  Richard Hughes  <richard@hughsie.com>

	* src/phonemgr-object.c: (phonemgr_object_coldplug):
	Unconditionally do NumberBatteriesChanged at coldplug to avoid a
	totally non-interesting race condition.

2007-07-25  Richard Hughes  <richard@hughsie.com>

	* src/phonemgr-object.c: (phonemgr_object_coldplug):
	* src/phonemgr-object.h:
	Fix the coldplug method so it can work. You _have_ to return TRUE,
	or return a GError.

2007-07-25  Richard Hughes  <richard@hughsie.com>

	* src/phonemgr-object.c: (phonemgr_object_register),
	(phonemgr_object_init):
	Actually register a bus name so other session dbus clients can
	connect to a named service.

2007-07-24  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Update gnokii requirements now that 0.6.18
	has been released

2007-07-24  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am:
	* src/icon.c: (tray_icon_init):
	* src/main.c:
	* ui/icons/16x16/status/Makefile.am:
	* ui/icons/22x22/status/Makefile.am:
	* ui/icons/24x24/status/Makefile.am:
	Update the icon loading to follow the best practices at
	http://live.gnome.org/ThemableAppSpecificIcons
	Make sure your hicolor theme is new enough, otherwise it just
	won't load anything

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* src/org_gnome_phone_Manager.xml: add the Coldplug method
	* src/phonemgr-object.c:
	(phonemgr_object_emit_number_batteries_changed),
	(phonemgr_object_emit_battery_state_changed),
	(phonemgr_object_coldplug):
	* src/phonemgr-object.h:
	Implement the coldplug method, so that gnome-power-manager can
	trigger us emitting signals when started after gnome-phone-manager

2007-07-23  Bastien Nocera  <hadess@hadess.net>

	* configure.in: generate the Makefiles for the new icons
	* src/ui.c: (on_conn_port_change), (populate_prefs), (apply_prefs):
	Kill the global conn_port variable
	* ui/icons/16x16/status/Makefile.am:
	* ui/icons/22x22/status/Makefile.am: update to distcheck the SVG files

2007-07-23  Andreas Nilsson  <nisses.mail@home.se>

	* ui/icons/24x24/status/phone-connecting:
	* ui/icons/24x24/status/phone-error:
	* ui/icons/24x24/status/phone-message: 24x24 canvas size added.

2007-07-23  Andreas Nilsson  <nisses.mail@home.se>

	* ui/icons/16x16/status/phone-connecting:
	* ui/icons/16x16/status/phone-error:
	* ui/icons/16x16/status/phone-message:
	* ui/icons/22x22/status/phone-connecting:
	* ui/icons/22x22/status/phone-error:
	* ui/icons/22x22/status/phone-message: Added sources for the status icons.

2007-07-20  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect):
	* libgsm/phonemgr-utils.c: (get_rfcomm_channel),
	(find_dun_channel), (phonemgr_utils_get_channel),
	(phonemgr_utils_write_config), (phonemgr_utils_connect),
	(phonemgr_utils_tell_driver):
	* libgsm/phonemgr-utils.h: Look up for the DUN channel,
	rather than letting gnokii use the default channel (1),
	Fixes connecting to Sony Ericsson K800i phones (Closes: #356865)

2007-07-18  Bastien Nocera  <hadess@hadess.net>

	* src/gnome-phone-manager.desktop.in: Use the right
	icon in the desktop file as well

2007-07-18  Bastien Nocera  <hadess@hadess.net>

	* src/icon.c: (set_icon_state): Use the right icons
	* ui/Makefile.am: Don't forget to update the icon cache

2007-07-18  Bastien Nocera  <hadess@hadess.net>

	* ui/icons/16x16/status/Makefile.am:
	* ui/icons/22x22/status/Makefile.am: Rename some
	files to not conflict with other named icons in other
	directories.

2007-07-18  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/app.h:
	* src/icon.c: (set_icon_state), (tray_icon_init):
	* src/main.c: (main):
	* src/menu.c: (about_activated):
	* ui/Makefile.am:
	* ui/icons/16x16/Makefile.am:
	* ui/icons/16x16/status/Makefile.am:
	* ui/icons/22x22/Makefile.am:
	* ui/icons/22x22/status/Makefile.am:
	* ui/icons/Makefile.am:
	* ui/phonemgr.glade: New icons from Andreas Nilsson, thanks
	Andreas! (Closes: #455844)

2007-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/main.c: (main): Don't forget to init GStreamer, if we want
	to play sounds
	* src/ui.c: (play_sound), (idle_play_alert),
	(set_dependent_widget), (create_send_dialog), (ui_init): Don't crash
	if we can't create an audiosink, only pass absolute filenames to
	the play_sound function, don't set the bluetooth radio button unsensitive
	if we switch to another type of connection

2007-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/main.c: (main): Creating the listener can't fail,
	init the icons before any UI bits

	* src/icon.c: (icon_init): Set a default window icon

	* src/phonemgr-chooser-button.c: (choose_bdaddr),
	(phonemgr_chooser_button_finalize): Don't change the device
	selected if there was already one, and we click cancel,
	parent the dialog properly to the preferences window, and
	kill the dialog when we exit

2007-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/connection.c: (set_connection_device), (connect_phone),
	(reconnect_phone): Only reconnect to the phone if the device
	we're connecting to really changed

2007-07-12  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd

	* src/app.h:
	* src/main.c: (main): Remove the BtctlController, and move it
	into the chooser widget

	* src/phonemgr-chooser-button.*:
	* ui/phonemgr.glade: Add a new chooser widget, and use it

	* src/gconf-bridge.*:
	* src/ui.c: (set_dependent_widget), (populate_prefs),
	(apply_prefs), (prefs_dialog_response), (ui_init):
	Simplify the code, using GConfBridge to bind toggle buttons
	and GConf keys, use GConfBridge to bind the new Bluetooth
	chooser button as well, try to bring as close as possible to
	instant-apply (still flaky) on reconnects

	* src/connection.c: (set_connection_device): Simplify
	set_connection_device(), remove unneeded define

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/ui.c: (get_current_btname), (populate_prefs), (apply_prefs):
	Avoid GConf errors when the bdaddr is empty (non-NULL)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/app.h:
	* ui/Makefile.am:
	* ui/gnome-phone-manager.schemas.in: Add a schemas file,
	remove the /prefs subdir to gnome-phone-manager GConf entries,
	it's all prefs anyway (Closes: #455841)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/icon.c: (tray_icon_popup_menu_cb):
	* src/ui.c: (apply_prefs), (prefs_dialog_response), (ui_init),
	(ui_hide), (show_prefs_window):
	* ui/phonemgr.glade: Patch from Christian Persch <chpe@gnome.org>
	to make the preferences dialogue a GtkDialog instead of a window,
	and fix some spacing issues (Closes: #455869)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require a newer gnome-bluetooth to get a fixed
	pkgconfig file for libgnomeui includes
	add GStreamer dependency to play our sound alert

	* libgsm/Makefile.am:
	* libgsm/gnokii-identify.c: Removed, deprecated by the --identify
	switch in gnome-phone-manager

	* src/menu.c: (about_activated), (construct_menu): Port to GtkAbout,
	use Gtk stock icons instead of GNOME ones

	* src/ui.c: (get_resource), (get_ui), (play_sound),
	(idle_play_alert): Use GStreamer to play the alerts, remove GNOME
	dependency for finding resource files

	* src/main.c: (main): Remove the GNOME dependencies, use GOption
	to add the --identify switch

	* src/icon.c: (load_icon):
	* src/app.h:
	* src/connection.c: Remove GNOME dep

	(Closes: #455837)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/gnome-phone-manager.desktop.in: Fix wonky desktop file,
	thanks to Richard Hughes

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* ui/Makefile.am: install cellphone in $(datadir)/pixmaps, not
	$(datadir)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/connection.c: (initialise_connection): Make it compile again
	with F7's glib

2007-07-11  Christian Persch  <chpe@gnome.org>

	* configure.in:
	* po/LINGUAS: Use po/LINGUAS as per GnomeGoal.

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (battery):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_battery),
	(phonemgr_listener_push):
	* libgsm/phonemgr-listener.h: Change the public API to use on_ac
	rather than on_battery to match gnome-power-manager's external API

	* src/app.h:
	* src/connection.c: (on_status), (on_battery),
	(initialise_connection):
	* src/main.c: (main):
	* src/phonemgr-object.c:
	(phonemgr_object_emit_number_batteries_changed),
	(phonemgr_object_emit_battery_state_changed):
	* src/phonemgr-object.h: Emit battery related signals on the D-Bus
	interface for gnome-power-manager's benefit (Closes: #455095)

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* src/app.h:
	* src/connection.c: (on_status), (free_connection),
	(initialise_connection): Remove an unneeded timeout
	id, use g_timeout_add_seconds() for our reconnector function

	* src/Makefile.am:
	* src/main.c: (main):
	* src/org_gnome_phone_Manager.xml:
	* src/org_gnome_phonemgr_Battery.xml:
	* src/phonemgr-object.c: (phonemgr_object_class_init),
	(phonemgr_object_emit_number_batteries_changed),
	(phonemgr_object_emit_battery_state_changed),
	(phonemgr_object_init):
	* src/phonemgr-object.h: Move the battery signal code to
	another file, rename to org.gnome.phone.Manager

2007-07-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add dbus dependency
	* libgsm/Makefile.am: Only bind the .la to libgnokii, rest will
	fall into place
	* libgsm/phonemgr-marshal.list: add marshaller for the D-Bus exported
	objects
	* src/Makefile.am:
	* src/main.c: (phonemgr_object_class_init), (phonemgr_object_init),
	(main):
	* src/org_gnome_phonemgr_Battery.xml: Add a D-Bus interface to send
	out signals when battery status changes

2007-07-10  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c:
	(phonemgr_utils_connection_is_supported): Remove test code

2007-07-10  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_connect),
	(phonemgr_utils_connection_is_supported):
	* libgsm/phonemgr-utils.h:
	Add a function to check for protocol availability (ie.
	gnokii built without Bluetooth support)

	* src/ui.c: (set_dependent_widget), (populate_prefs):
	* ui/phonemgr.glade: Set the Bluetooth chooser as unsensitive
	if there's no bluetooth support

2007-07-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Require the latest gnokii CVS (newer than
	0.6.17)

	* libgsm/phonemgr-listener.c: (phonemgr_listener_init),
	(phonemgr_listener_connect), (phonemgr_listener_new_call_cb),
	(phonemgr_listener_call_notification_poll),
	(phonemgr_listener_set_sms_notification),
	(phonemgr_listener_thread), (phonemgr_listener_disconnect),
	(phonemgr_listener_cancel_call), (phonemgr_listener_answer_call):
	* libgsm/phonemgr-listener.h:
	Remove actual polling for new SMSes, and rely on the driver
	notifications, it removes gross hacks, and notifications is
	supported by our biggest user, the AT driver (Closes: #330773)

	Add stubs for answer/cancel call

	* libgsm/phonemgr-utils.c: (phonemgr_utils_connect),
	(phonemgr_utils_disconnect), (phonemgr_utils_free):
	* libgsm/phonemgr-utils.h: some prototypes cleanups

2007-07-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_battery_poll):
	Only use 2 functions for reading the power info if the driver uses
	2 different commands, handle arbitrary percentages the same way
	xgnokii does

2007-07-07  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (call_status), (battery), (status), (main):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_class_init),
	(phonemgr_listener_emit_battery), (phonemgr_listener_init),
	(phonemgr_listener_push), (phonemgr_listener_new_sms_cb),
	(phonemgr_listener_call_status), (phonemgr_listener_battery_poll),
	(phonemgr_listener_thread):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-marshal.list:
	Emit call notification signals from the main thread, not the worker
	thread, add battery signal, still need to work out the non-percent
	battery reporting though

2007-07-06  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (call_status), (main):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_class_init),
	(phonemgr_listener_emit_call_status),
	(phonemgr_listener_call_status), (phonemgr_listener_new_call_cb),
	(phonemgr_listener_call_notification_poll):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-marshal.list: Add proper call notification, rings
	for AT with a notification, status is polled,
	update glibgsmtest to print call status changes

2007-07-05  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_new_call_cb),
	(phonemgr_listener_sms_notification_soft_poll),
	(phonemgr_listener_call_notification_poll),
	(phonemgr_listener_set_sms_notification),
	(phonemgr_listener_set_call_notification),
	(phonemgr_listener_thread),
	(phonemgr_listener_sms_notification_real_poll):
	* libgsm/phonemgr-listener.h: Update to compile with current gnokii
	CVS HEAD, add some bits of calls notification API

2007-07-04  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_class_init),
	(phonemgr_listener_emit_status),
	(phonemgr_listener_emit_call_status),
	(phonemgr_listener_emit_message), (phonemgr_listener_new),
	(phonemgr_listener_finalize), (phonemgr_listener_push),
	(phonemgr_listener_new_sms_cb), (phonemgr_listener_poll_real):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-marshal.list:
	* libgsm/phonemgr-utils.c: (gn_timestamp_to_gtime):
	* libgsm/phonemgr-utils.h: Add framework for call status reporting,
	no actual call polling right now

2007-07-04  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_status):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c: (phonemgr_utils_driver_parse_start_tag):
	* src/app.h:
	* src/connection.c: (set_connection_device), (on_message):
	* src/e-phone-entry.c: (e_phone_entry_new_from_glade):
	* src/e-phone-entry.h:
	* src/icon.c: (load_icon):
	* src/menu.c: (about_activated):
	* src/ui.c: (boldify_label), (get_ui), (get_resource),
	(idle_play_alert), (get_current_btname), (set_dependent_widget),
	(on_conn_port_change), (set_btdevname), (populate_prefs),
	(choose_bdaddr), (set_send_sensitivity), (send_message),
	(create_send_dialog): Kill gint and gchar

2007-07-04  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_push),
	(phonemgr_listener_new_sms_cb),
	(phonemgr_listener_sms_notification_poll),
	(phonemgr_listener_set_sms_notification),
	(phonemgr_listener_thread), (phonemgr_listener_set_time),
	(phonemgr_listener_poll_real):
	* libgsm/phonemgr-listener.h:
	Add support for out-of-band notification, requires gnokii patch from
	http://thread.gmane.org/gmane.linux.drivers.gnokii/8941/focus=8956
	to allow user_data parameter to the callbacks (Closes: #453656)

2007-07-03  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (message), (main):
	* libgsm/phonemgr-listener.c: (gn_timestamp_to_gtime),
	(phonemgr_listener_emit_message), (phonemgr_listener_poll_real):
	* libgsm/phonemgr-listener.h:
	* src/app.h:
	* src/connection.c: (on_message):
	* src/ui.c: (time_to_string), (dequeue_message):
	Use time_t instead of GTime all around, as GTime is 32-bit even on
	64-bit platforms.

	Use strftime directly instead of g_date_strftime(), as GDate doesn't do
	time, just dates, fixes all messages as showing up as sent at midnight

	Fix crasher when receiving new message, gn_sms was freed in another function
	when it's supposed to be on the stack. Allocate it properly instead,
	and only free it in the idle handler, or if the message isn't unread.

2007-07-03  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_push),
	(phonemgr_listener_poll_real), (phonemgr_listener_poll),
	(phonemgr_listener_init):
	* libgsm/phonemgr-listener.h:
	Remove phonemgr_listener_poll() and use an idle signal to
	push the new messages instead

	* libgsm/glibgsmtest.c: (main): update for above change

	* src/connection.c: (connect_phone_thread), (on_message),
	(initialise_connection): update for above change, and remove testing
	code, as we already have a dummy backend in libgsm

	* src/e-phone-entry.c: (text_changed): Remove some outdated debug code

	* src/icon.c: remove the icon blinking/flashing code, we'll use
	libnotify instead

	* src/test-entry.c: (main): Call g_thread_init to avoid warning with
	newer glib

2007-07-03  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_new),
	(phonemgr_listener_init), (phonemgr_listener_connect),
	(phonemgr_listener_poll_real): Try to work around the fact that
	the AT driver doesn't support report the number of unread messages

2007-07-02  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh: remove libegg mentions in there as well

	* configure.in: up the gnokii requirements

	* libgsm/glibgsmtest.c: (main): silly identation changes,
	call g_thread_init() to avoid warnings with newer glibs

	* libgsm/gnokii-identify.c: (main):
	* libgsm/phonemgr-utils.c: (phonemgr_utils_guess_driver),
	(phonemgr_utils_tell_driver):
	* libgsm/phonemgr-utils.h: Move tell_driver() to phonemgr-utils,
	so we can add the feature in g-p-m itself, use gn_lib_get_phone_model
	instead of GN_OP_Identify, kill warning with newer glib, as above

2007-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/ui.c: (boldify_label), (bigger_label), (get_ui):
	* ui/phonemgr.glade:
	Remove markup from the glade file (Closes: #151431)

2007-07-02  Bastien Nocera  <hadess@hadess.net>

	* libegg/*: remove outdated copy of libegg

	* Makefile.am:
	* configure.in:
	* src/Makefile.am:
	* src/app.h:
	* src/icon.c: (tray_icon_activate_cb), (tray_icon_popup_menu_cb),
	(load_icon), (flash_icon), (enable_flasher), (set_icon_state),
	(program_icon), (tray_icon_init), (tray_icon_hide):
	* src/main.c: (main):
	* src/ui.c: (ui_init): Use GtkStatusIcon instead of the EggTrayIcon
	(Closes: #349259)

2007-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: Update from contact-lookup-applet trunk

2007-07-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: No need to check open-obex, we don't use it here
	(Closes: #441032)

2007-01-23  David Lodge <dave@cirt.net>

	* configure.in: Added en_GB to ALL_LINGUAS

2006-12-14  Pema Geyleg  <pgeyleg@gmail.com>

	* configure.in: Added 'dz' to ALL_LINGUAS

2006-11-01  Dan Winship  <danw@novell.com>

	* configure.in: Run configure checks under gcc, not g++ (#368920)

2006-10-19  Josep Puigdemont i Casamajó  <josep.puigdemont@gmail.com>

	* configure.in: Added "ca" (Catalan) to ALL_LINGUAS.

============ Version 0.8

2006-09-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 0.8

2006-08-25  Hendrik Richter  <hrichter@gnome.org>

	* configure.in: Added "de" to ALL_LINGUAS.

2006-08-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/e-contact-entry.c: Patch from Ed Catmur <ed@catmur.co.uk>
	to make c-l-a compile with newer versions of e-d-s (Closes: #349726)

2006-05-11  Bastien Nocera  <hadess@hadess.net>

	* src/icon.c: (load_icon): Try to load icons in both the program's
	datadir, and the pixmaps dir
	* ui/Makefile.am: install cellphone.png in both $(datadir)/pixmaps
	and $(datadir)/gnome-phone-manager (Closes: #341385)

============ Version 0.7

2006-05-05  Bastien Nocera  <hadess@hadess.net>

	* configure.in: version 0.7
	* src/ui.c: (dequeue_message): some build fixes, and made the code
	more glib-y
	* NEWS: upd

2006-05-03  Ilkka Tuohela  <hile@iki.fi>

	* configure.in: Added "fi" to ALL_LINGUAS

2006-04-17  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Remove obsolete entry for no_NO.
	* po/nb.po: Updated Norwegian bokmål translation.
	* po/no.po: Remove the old one.

2006-03-31  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* libgsm/gnokii-identify.c: (tell_driver):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect),
	(phonemgr_listener_disconnect), (phonemgr_listener_queue_message),
	(phonemgr_listener_poll_real):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c: (phonemgr_utils_driver_for_model),
	(phonemgr_utils_guess_driver), (phonemgr_utils_connect),
	(phonemgr_utils_disconnect), (phonemgr_utils_free):
	* libgsm/phonemgr-utils.h:
	* src/connection.c: (set_connection_device):
	Add new convenience structs and functions to connect to the phone
	using gnokii, and avoid reconnecting to the phone if the default
	driver is already the one being used (Closes: #312278)

2006-02-01  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add gmodule-2.0 to the needed libraries, to get
	-rdynamic and avoid the entry not showing up

2006-01-24  Clytie Siddall <clytie@riverland.net.au>

	* configure.in	Added vi in ALL_LINGUAS line.

2005-12-28  Bastien Nocera  <hadess@hadess.net>

	* libgsm/glibgsmtest.c: (main): fix the _connect functions to be
	called with the right number of arguments

2005-12-27  Bastien Nocera  <hadess@hadess.net>

	* ui/.cvsignore:
	* ui/Makefile.am: add missing files (Closes: #324285)

2005-11-19  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* src/gnome-phone-manager.desktop.in: install the icons and other UI
	bits by hand, fixes the desktop menu icon not appearing
	(Closes: #321882)

2005-10-11  Pawan Chitrakar  <pchitrakar@gmail.com>

	* configure.in: Added ne in ALL_LINGUAS

2005-09-22  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add pl to ALL_LINGUAS

2005-09-10  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect):
	Fix dummy build

2005-09-10  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_error_quark),
	(phonemgr_listener_connect):
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c: (phonemgr_utils_gn_error_to_string),
	(phonemgr_utils_guess_driver):
	* libgsm/phonemgr-utils.h:
	* src/connection.c: (connect_phone_thread):
	Some work towards adding better error reporting, especially on
	new connections

2005-09-10  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect):
	* libgsm/phonemgr-utils.c:
	* libgsm/phonemgr-utils.h: Print out which driver we are using, and
	errors when gn_gsm_initialise fails

2005-09-09  Bastien Nocera  <hadess@hadess.net>

	* libgsm/Makefile.am:
	* libgsm/phonemgr-utils.c: (phonemgr_utils_driver_parse_start_tag),
	(totem_driver_model_free), (phonemgr_utils_start_parse),
	(phonemgr_utils_init_hash_tables):
	* libgsm/phones.xml:
	Move the model/driver match to an xml file to avoid having to
	rebuild gnome-phone-manager to add support for more phones
	(Closes: #315630)

2005-09-09  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require gnokii 0.6.5 to compile (Closes: #315628)

2005-09-09  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_init_hash_tables):
	Add support for the Nokia 6021 and Nokia 6230, with help from
	Frederic Crozat <fcrozat@mandriva.com>

============ Version 0.6

2005-09-09  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: version 0.6

2005-09-09  Bastien Nocera  <hadess@hadess.net>

	* src/e-contact-entry.c: (book_opened_cb),
	(e_contact_entry_set_source_list), (e_contact_entry_init),
	(e_contact_entry_class_init):
	* src/e-contact-entry.h: update from contact-lookup-applet CVS
	* src/e-phone-entry.c: (sources_changed_cb),
	(setup_source_changes), (e_phone_entry_init):
	Update for changes in EContactEntry, watch the availability of
	completion entries, the entry now works even if there aren't any
	addressbooks with completion enabled (Closes: #310014)

2005-09-08  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_poll): add some
	+ and - in the phone number, to test for common phone numbers found in
	people's address books
	* src/e-phone-entry.c: (cleanup_number), (text_changed),
	(contact_selected_cb), (e_phone_entry_get_number):
	send a changed signal when first setting the phone number,
	allow '-' in phone numbers (Closes: #314545),
	Fix some memory leaks when checking for changed text in text_changed()
	* src/test-entry.c: (phone_changed_cb), (main): Fix warnings

2005-09-08  Bastien Nocera  <hadess@hadess.net>

	* autogen.sh: use autogen 1.8
	* configure.in: dist as a .tar.bz2, and check the NEWS file before
	dist'ing
	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_status),
	(phonemgr_listener_new), (phonemgr_listener_connect),
	(phonemgr_listener_disconnect), (phonemgr_listener_queue_message),
	(phonemgr_listener_poll), (phonemgr_listener_connected),
	(phonemgr_listener_init), (phonemgr_listener_finalize):
	add a new dummy mode (#define DUMMY, to enable), this allows you
	to test gnome-phone-manager and specific bugs without having a
	phone, GSM coverage, or a bluetooth adapter
	It will send you a new message after 5 seconds, and another one after
	that at 100 seconds (Closes: #315553)
	* libgsm/phonemgr-utils.c: (phonemgr_utils_driver_for_model),
	(phonemgr_utils_guess_driver): use the AT driver instead of the
	AT-HW one
	* src/e-contact-entry.c: (e_contact_entry_init),
	(stringify_ebook_error): update from contact-lookup-applet CVS

2005-08-10  Maxim Dziumanenko <mvd@mylinux.ua>

        * configure.in: Added "uk" to ALL_LINGUAS.

2005-07-11  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-utils.c: (phonemgr_utils_init_hash_tables):
	Add support for the Nokia 6230i (from Peter Robinson
	<pbrobinson@gmail.com>)

2005-06-15  Bastien Nocera  <hadess@hadess.net>

	* libgsm/gnokii-identify.c: (tell_driver):
	* libgsm/phonemgr-listener.c: (phonemgr_listener_connect):
	* libgsm/phonemgr-utils.c: (phonemgr_utils_gn_statemachine_clear),
	(phonemgr_utils_guess_driver):
	* libgsm/phonemgr-utils.h: add a work-around for a gnokii segfault
	when running GN_OP_Terminate
	See http://article.gmane.org/gmane.linux.drivers.gnokii/5888

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* src/app.h:
	* src/icon.c: (tray_icon_hide):
	* src/main.c: (main):
	* src/menu.c: (quit_activated):
	* src/ui.c: (ui_hide): Speed up the exit by hiding the widgets as
	soon as they're not needed anymore

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* libgsm/phonemgr-listener.c: (phonemgr_listener_emit_message),
	(phonemgr_listener_queue_message):
	* src/e-contact-entry.c: (view_contacts_added_cb), (entry_height):
	GCC4 compilation fixes

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* libgsm/.cvsignore: upd

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* README:
	* libgsm/Makefile.am:
	* libgsm/glibgsmtest.c: (message), (status), (main):
	* libgsm/gsm.cc:
	* libgsm/gsm.h:
	* libgsm/main.cc:
	* libgsm/phonemgr-listener-private.h:
	* libgsm/phonemgr-listener.c:
	* libgsm/phonemgr-listener.cc:
	* libgsm/phonemgr-listener.h:
	* libgsm/phonemgr-utils.c:
	* libgsm/phonemgr-utils.h:
	* libgsm/gnokii-identify.c:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/connection.c: (set_connection_device),
	(connect_phone_thread):
	* src/test-entry.c: (main):
	Remove the libgsm backend, and use gnokii now instead, this should
	allow us to have better compatibility with more phones
	(Closes: #307406)

2005-06-13  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/Makefile.am:
	* src/e-contact-entry.c:
	* src/e-contact-entry.h:
	* src/e-phone-entry.c:
	* src/e-phone-entry.h:
	* src/test-entry.c:
	* src/ui.c: (set_send_sensitivity), (phone_number_changed),
	(send_message), (create_send_dialog):
	* src/update-from-egg.sh:
	* ui/phonemgr.glade:
	* ui/phonemgr.gladep:
	* ui/strings.c:

	Check for libebook in configure
	Add EContactEntry from contact-lookup-applet with script to update
	the files
	Add new EPhoneEntry widget, which checks for mobile phone numbers
	in Evolution's addressbook
	Make gnome-phone-manager use EPhoneEntry rather than a plain GtkEntry
	Remove unused files
	(Closes: #151119)

2005-04-01  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-01-20  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add «nb» and «no» to ALL_LINGUAS.

2005-01-19  Alessio Frusciante  <algol@firenze.linux.it>

	* configure.in: Added "it" (Italian) to ALL_LINGUAS.

2005-01-18	Amanpreet Singh Alam <amanpreetalam@yahoo.com>

	* configure.in: pa (Punjab) is added to ALL_LINGUAS

2004-09-09  Ankit Patel <ankit@redhat.com>

	* configure.in: Added 'gu' (Gujarati) to ALL_LINGUAS.

2004-08-30  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2004-08-21  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* configure.in: Added es to ALL_LINGUAS

2004-08-10  Gustavo Maciel Dias Vieira  <gustavo@sagui.org>

	* configure.in: Added pt_BR to ALL_LINGUAS.

2004-08-10  Edd Dumbill <edd@usefulinc.com>

	* src/connection.c: add comments for some printf strings to
	help translators.  Addresses #149677

2004-08-08  Duarte Loreto <happyguy_pt@hotmail.com>

	* configure.in: Added Portuguese (pt) to ALL_LINGUAS.

2004-08-06  Adam Weinberger  <adamw@gnome.org>

	* configure.in: Added en_CA to ALL_LINGUAS.

2004-06-23  Edd Dumbill <edd@usefulinc.com>

	* libgsm/gsm.{cc,h} compile fixes from Richard Torkar.

2004-06-23  Edd Dumbill <edd@usefulinc.com>

	* libgsm/phonemgr-listener.cc (on_phone_message): convert message
	to utf-8 from iso-8859-1.
	* libgsm/phonemgr-listener.cc (phonemgr_listener_queue_message): 
	convert outgoing message from utf-8 to iso-8859-1.
	* configure.in: added the openobex check, as we need to link
	with that, and removed obsolete orbit check.
	* src/icon.c: add timeout to flash message icon, single-click
	on icon dequeues a message
	* src/ui.c: add popup_messages pref to control whether popup
	dialogs appear or not.  make dequeue_messages() open a new window
	for each message.
	* configure.in: bump version to 0.4
	* ui/phonemgr.glade: add "Interface" tab to prefs.
	* src/ui.c (apply_prefs, populate_prefs): wire up new
	prefs to UI
	* ui/alert.wav: sound file for audible alert
	* src/ui.c (play_alert): add method to play bell if enabled
	* src/connection.c: ifdef out testing code.
	* Makefile.am: install wav file
	* ui/phonemgr.glade: remove dummy content from widgets so
	translators don't translate it. apply some polish.
	* src/icon.c: detect whether Notification Area is running or
	not, and if not, put up a dialog telling the user how to
	add one.
	* Release 0.4.

2004-06-21  Edd Dumbill <edd@usefulinc.com>

	* ui/phonemgr.glade: remove irritating single pixel border on
	textview in message send dialog. In message received dialog,
	change "OK" to "Close".

2004-06-20  Edd Dumbill <edd@usefulinc.com>

	* libgsm/gsm.cc: connect() empty send queue on connection to
	avoid repeated sending of failing messages.  Increase timeout
	on serial port to 30 seconds from 5.
	* ui/phonemgr.glade: some HIGgification of dialogs.

2004-06-18  Edd Dumbill <edd@usefulinc.com>

	* libgsm/gsm.cc: delete MeTa when disconnected.
	* src/*.c: partially working phonemgr app now.
	* src/connection.c: make connection and disconnection
	happen in a separate thread, so the GUI doesn't block while
	this happens.
	* src/connection.c: implement auto-reconnect feature.
	* src/connection.c, src/ui.c: message receiving functional.
	* src/connection.c, ui.c: add disconnect_signal_handlers() to
	be called on quit, so don't deadlock in status change.
	* src/icon.c: make tray_icon_set do a tooltip too.
	* libgsm/gsm.cc: disconnect on errors properly.
	* libgsm/phonemgr-listener.cc: set disconnected flag on error.
	* src/menu.c: add Send Message menu item.
	* ui/phonemgr.glade: a bit of HIGgification.
	* src/ui.c: implement sending dialog.
	* ui/pixmaps/, Makefile.am: move pngs into same directory as
	glade file: abandon hope of glade respecting the pixmap dir.
	* src/gnome-phone-manager.desktop.in: correct icon path
	* po/POTFILES.in: update.
	* src/icon.c: update pixmaps path.
	* src/main.c: init UI before tray icon.
	* src/ui.c: prefer local UI to installed one, if available.
	* src/ui.c: hook up the Reply button.
	* src/connection.c: deal with empty bdaddr better.
	* Release 0.3.

2004-06-17  Edd Dumbill <edd@usefulinc.com>

	* Checking into GNOME CVS.  Starting port to the new Bonobo-less
	gnome-bluetooth framework.
	* Move gsm stuff to libgsm/. Start work on GObject wrapper for it.
	* libgsm/.cvsignore, .cvsignore: add cvsignores.
	* libgsm/phonemgr-listener.cc: keep track of whether connected, and
	complain if methods requiring connection are called when disconnected.
	* libegg/: import libegg bits we'll need.
	* autogen.sh: call libegg autogen.sh.
	* configure.in: chain libegg configure.
	* src/Makefile.am, src/main.c: stubs for main program.
	* ui/GNOME_PhonemanagerApplet.xml: remove.
	* src/gnome-phone-manager.desktop.in: add desktop file.

2003-07-06  Edd Dumbill  <edd@usefulinc.com>

	* Release 0.2.1.
	* giveusaclue.c,h dashboard-frontend.c: now supports sending
	cluepackets to Nat Friedman's Dashboard <http://nat.org/dashboard>.

2003-04-03  Edd Dumbill  <edd@usefulinc.com>

	* Now goes for the dialup networking connection rather than
	  the serial port on Bluetooth -- increased compatibility, I
	  hope.  Means it should work for Nokia 7650 owners.

2003-03-05  Edd Dumbill  <edd@usefulinc.com>

	* Added French translation from Gaël Chamoulaud

2003-03-01  Edd Dumbill  <edd@usefulinc.com>

	* Release 0.2.0.
	* src/gsm.cc: make date formatting use Glib as much as possible
	* pursue further Glib::ustring conversions

2003-02-19  Edd Dumbill  <edd@usefulinc.com>

	* Converted std::strings to Glib::ustrings throughout.

	* Implemented sending functionality.  Reply button now works
	in message dialog.  "Send message..." menu item on applet.

2003-02-07  Edd Dumbill  <edd@usefulinc.com>

	* Release 0.1.2.
	* Fixed missing std:: prefix from some string declaration types.

2002-11-15  Edd Dumbill  <edd@usefulinc.com>

	* Release 0.1.1.

	* Hook up Prefs/Update button to Bluetooth device discovery and
	provides UI feedback while the discovery is going on.

2002-11-11  Edd Dumbill  <edd@usefulinc.com>

	* First public release, 0.1.

2002-10-28  Edd Dumbill  <edd@usefulinc.com>

	* Pre-alpha stage, released privately.

